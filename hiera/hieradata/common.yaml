# Jenkins username and password the agents should use to authenticate with the client.
# Both master and repo machines have specific agents: agent_on_master and building_repostory respectively
# That make use of this configuration as well.
# If you use the [GitHub authentication plugin](https://plugins.jenkins.io/github-oauth/) as the authentication
# provider for Jenkins you will want to register it as a [GitHub application](https://github.com/settings/applications/new)
# and set this to a GitHub username and access token.
jenkins::slave::ui_user: 'admin'
jenkins::slave::ui_pass: 'changeme'
# The version of the swarm client plugin should be the same between the jenkins master and agents on all hosts.
# Note that versions above 3.0 require use of a modified version of the docker puppet module
jenkins::swarm_version: &jenkins_swarm_version '3.14'
jenkins::slave::version: *jenkins_swarm_version

# This should be unchanged so that the masterurl always uses the hosts entry to reach master.
jenkins::slave::masterurl: 'http://192.168.50.10:8080'

master::ip: 192.168.50.10
repo::ip: 192.168.50.11

# change this to match the timezone that this buildfarm is located in.
timezone: 'America/Los_Angeles'

# SSH keys to be added to each host.
# The jenkins-agent public key is one you'll want to generate specifically for your deployment.
# An example:
#    $ ssh-keygen -m PEM -t rsa -b 4096 -C "jenkins-agent@my-buildfarm" -f buildfarm_deployment_rsa
# Then copy the type and key in buildfarm_deployment_rsa.pub into the jenkins-agent@my-buildfarm key field below.
# The user field should remain jenkins-agent so it can be used to authenticate with the jenkins-agent user on the repo host.
#
# The contents of the private key in the example above buildfarm_deployment_rsa
# should be copied to the `jenkins::private_ssh_key` field of hiera/hieradata/buildfarm_role/master.yaml
# where it will be added via ssh-agent to running jenkins jobs on all agents.
ssh_keys:
  # Using the `buildfarm_deployment_rsa.pub` in the above example
  # you'll split the file contentsinto three different components separated by spaces:
  # * type: always ssh-rsa for rsa keys but different for other key types.
  # * public key value: The verbatim text of your public key base64-encoded.
  #   Depending on the key length this may be very long and include one or two trailing `=` of padding.
  # * comment: a plaintext "comment" which is generally used as a label identifying the key.
  # For example consider the key below:
  #     ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQCuIjV8RI7QOay95BAOuv9NlaKlm0xMfD9Q12ynKPElW+1cYhOmdmqrRqavbYxD9v2wB4hRl7VDsJak0w21UakyfKAZjhhmiMUA1yaQtJCKvw5RFbM6O/QmPNAnQDaVR2X1tRW5DVvbO2Z7ppQIHD3Ln3t5yYI/fwOgfBIsgr09Pw== jenkins-agent@my-buildfarm
  # * The type is `ssh-rsa`.
  # * The key value is `AAAAB3NzaC1yc2EAAAADAQABAAAAgQCuIjV8RI7QOay95BAOuv9NlaKlm0xMfD9Q12ynKPElW+1cYhOmdmqrRqavbYxD9v2wB4hRl7VDsJak0w21UakyfKAZjhhmiMUA1yaQtJCKvw5RFbM6O/QmPNAnQDaVR2X1tRW5DVvbO2Z7ppQIHD3Ln3t5yYI/fwOgfBIsgr09Pw==`.
  # * The comment is `jenkins-agent@my-buildfarm`.
  #
  # Use the comment as the key name
  'jenkins@my-buildfarm':
    key: 'AAAAB3NzaC1yc2EAAAADAQABAAABAQDcxlez7Z/v5UdXdHmKeIM5fCZb8u7Ogz8cJDScysTzuCpwQSE3LVn5Ipo28nxAxtEoBRIy4p3noRVEDq9EG6bdk2ddNxH8F79NyMBCViOu8Nk43/ryLn/WLI7xgGNZKovJ/IMm/fvvs1aZtb4MMfLE8/xYioNtYPie9AKLoCVG4+LIgNBth1BKUgbsgXEL47sfQcFy4KgU7qNEKmsTQ5Dwr7l8q3gaAdZ8VoHUJXlNL+nte3SlAd2dJ0tze/kbt37wuJm4RGAmGom+BlAZZgjDPksjyATq4w8NXiJROFtaqtCskdjDzpH3BpywFH4xs95oTCxApeAYzW5OsaDALSbP'
    type: ssh-rsa
    user: jenkins-agent
    require: 'User[jenkins-agent]'
ssh_host_keys:
  ssh_host_keys:
    repo: '# 192.168.50.11:22 SSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.10 192.168.50.11
      ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBCtykGqAtNRg4mZ8EC2y7g7x0W3tZ2ZFv63DEcCCvTDxBd2u8OYsv+z+A+knyvsyxHMt617BcE9pX8fVZwp8Idg=
      # 192.168.50.11:22 SSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.10 192.168.50.11 ssh-rsa
      AAAAB3NzaC1yc2EAAAADAQABAAABAQDojjWXmlEyod6GUzeE02sqcnEmjMscvQfAc4F/USgl9A1QzoQkbZ66A9sv5AUtIYzs0QqdFq5/hKhNwsZzKmUOzYe99OBaTK60v5Tn9Vy1Z4j872hhDQwWWqXsppyrmjgweyCyLZpP6T8tOitKYWRUZuko982d6YVSEV/Dc149w5ISUBVg4HDGCtFcNggL3FncCKENgQJ1E4Ekj6k0f3Zm2pjTeUPmXoOy+rSvxbLut5RvGD1jw/URVcejKiPy91p5gKBW2f78fbjicQADb2Spn+PhX7Js9H8qUj6JgzM8X/EkSapqt/KvnEPGHm5AcmwNeKHZPOHjQJFWcCUjpgCX
      # 192.168.50.11:22 SSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.10 192.168.50.11 ssh-ed25519
      AAAAC3NzaC1lZDI1NTE5AAAAICxHSHku6zCOD2r3PRLqtuVQjxEZvhbUJhVulZhzhaL7'
    '#': '# github.com:22 SSH-2.0-babeld-70f1bac9 github.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBEmKSENjQEezOmxkZMy7opKgwFB9nkt5YRrYMjNuG5N87uRgg6CLrbo5wAdT/y6v0mKV0U2w0WZ2YB/++Tpockg=
      # github.com:22 SSH-2.0-babeld-70f1bac9 github.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCj7ndNxQowgcQnjshcLrqPEiiphnt+VTTvDP6mHBL9j1aNUkY4Ue1gvwnGLVlOhGeYrnZaMgRK6+PKCUXaDbC7qtbW8gIkhL7aGCsOr/C56SJMy/BCZfxd1nWzAOxSDPgVsmerOBYfNqltV9/hWCqBywINIR+5dIg6JTJ72pcEpEjcYgXkE2YEFXV1JHnsKgbLWNlhScqb2UmyRkQyytRLtL+38TGxkxCflmO+5Z8CSSNY7GidjMIZ7Q4zMjA2n1nGrlTDkzwDCsw+wqFPGQA179cnfGWOWRVruj16z6XyvxvjJwbz0wQZ75XK5tKSb7FNyeIEs4TT4jk+S4dhPeAUC5y+bDYirYgM4GC7uEnztnZyaVWQ7B381AK4Qdrwt51ZqExKbQpTUNn+EjqoTwvqNj4kqx5QUCI0ThS/YkOxJCXmPUWZbhjpCg56i+2aB6CmK2JGhn57K5mj0MNdBXA4/WnwH6XoPWJzK5Nyu2zB3nAZp+S5hpQs+p1vN1/wsjk=
      # github.com:22 SSH-2.0-babeld-70f1bac9 github.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOMqqnkVzrm0SdG6UOoqKLsabgH5C9okWi0dh2l9GKJl'
autoreconfigure: false
# Pay special attention to the Git branch name that appears twice in the invocation below.
autoreconfigure::command: 'bash -c "cd /root/buildfarm_deployment_config && git fetch
  origin xenialize && git reset --hard origin/xenialize && ./reconfigure.bash"'

# This docker option is being removed from the upstream puppetlabs-docker module.
# It isn't required on Ubuntu Xenial and causes an error when deploying to AWS with the default AWS kernel.
#
# By the time our project is able to move to the new puppet module (requires puppet >= 4.0) this option will probably
# be removed.
# https://github.com/puppetlabs/puppetlabs-docker/issues/38
docker::manage_kernel: false

# Unless you have explicit needs with the docker version
# The values below should not be changed.
docker::package_name: docker-ce
docker::package_source_location: https://download.docker.com/linux/ubuntu
docker::package_key_source: https://download.docker.com/linux/ubuntu/gpg
docker::package_key: 9DC858229FC7DD38854AE2D88D81803C0EBFCD88
docker::package_release: xenial
docker::package_repos: stable
docker::service_overrides_template: agent_files/docker-service-overrides.conf.erb

# Classes to be pulled in via hiera_include classes.
#classes:
    # Enables the New Relic sysmon daemon.
    # A license key / api key is required to use it.
    #- nrsysmond
# License key required for nrsysmond class above
# nrsysmond::license_key: xxxyyyyzzzz
